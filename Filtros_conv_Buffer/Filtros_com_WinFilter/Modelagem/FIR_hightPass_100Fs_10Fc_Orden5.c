/**************************************************************
WinFilter version 0.8
http://www.winfilter.20m.com
akundert@hotmail.com

Filter type: High Pass
Filter model: Butterworth
Filter order: 5
Sampling Frequency: 100 Hz
Cut Frequency: 10.000000 Hz
Coefficents Quantization: float

Z domain Zeros
z = 1.000000 + j 0.000000
z = 1.000000 + j 0.000000
z = 1.000000 + j 0.000000
z = 1.000000 + j 0.000000
z = 1.000000 + j 0.000000

Z domain Poles
z = 0.548290 + j -0.234148
z = 0.548290 + j 0.234148
z = 0.509525 + j -0.000000
z = 0.684659 + j -0.473087
z = 0.684659 + j 0.473087
***************************************************************/
#define Ntap 31

float fir(float NewSample) {
    float FIRCoef[Ntap] = { 
        -0.00361882943579113670,
        -0.00591778040953374900,
        -0.00667639094116757780,
        -0.00467073450872546560,
        0.00072768950305848355,
        0.00895555407848293810,
        0.01787081344548056100,
        0.02382931067886822100,
        0.02238972980746851300,
        0.00961210020006860420,
        -0.01635233532722765700,
        -0.05392250380218901300,
        -0.09762958634784024700,
        -0.13899161330275908000,
        -0.16870581897300346000,
        0.81822187759353004000,
        -0.16870581897300346000,
        -0.13899161330275908000,
        -0.09762958634784024700,
        -0.05392250380218901300,
        -0.01635233532722765700,
        0.00961210020006860420,
        0.02238972980746851300,
        0.02382931067886822100,
        0.01787081344548056100,
        0.00895555407848293810,
        0.00072768950305848355,
        -0.00467073450872546560,
        -0.00667639094116757780,
        -0.00591778040953374900,
        -0.00361882943579113670
    };

    static float x[Ntap]; //input samples
    float y=0;            //output sample
    int n;

    //shift the old samples
    for(n=Ntap-1; n>0; n--)
       x[n] = x[n-1];

    //Calculate the new output
    x[0] = NewSample;
    for(n=0; n<Ntap; n++)
        y += FIRCoef[n] * x[n];
    
    return y;
}
